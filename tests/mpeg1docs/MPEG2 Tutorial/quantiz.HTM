<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>

	<META NAME="VPSiteProject" CONTENT="file:///C|/Bretl%20Site%20copy/BretlSite.vpp"><meta name="generator" content = "HyperText Studio from Olson Software (http://www.olsonsoft.com)">
<meta name="formatter" content = "HyperText Studio from Olson Software (http://www.olsonsoft.com)">
<title>MPEG 2 Quantization</title>
<style><!-- body { }
H1{}
H6{}
H5{}
H3{}
H2{}
P{}
H4{}
.DefaultParagraphFont{}
 --></style>
</head>
<body>
<BANNER>

<p><font size="5" face="Arial"><span class="DefaultParagraphFont" style="font-size: 16pt;"><b>MPEG 2 Quantization</b></span></font><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;"></span></font></p></BANNER>

<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">The encoder applies variable uniform quantization to DCT coefficients to reduce the number of bits required to represent them. Higher frequency coefficients will usually be more coarsely quantized (larger step size) than lower frequency coefficients.</span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;"><b>The encoder operation is as follows:</b></span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">Assume that F is an unquantized DCT coefficient, QF is a quantized DCT coefficient, W is the step size and S is the scale factor.</span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">For AC coefficients of intra coded blocks, QF = [(32 x F) + (sign(F) x W x S)]/(2 x Q x W)</span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">For all coefficients of non intra coded blocks, QF = (32 x F)/(2 x S x W)</span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">This results in a larger encoded dead zone around 0 for the non intra case.</span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">For DC coefficients of intra coded blocks, QF = F/k &nbsp;where k is a constant determined by the selected DCT precision.</span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">The values for step size W are determined from 8x8 matrices such that each DCT coefficient position can have a different value of W. There are default matrices for intra and non intra coded blocks. These can be overridden by other W matrices that may be sent to the decoder at the picture layer level.</span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">The values for scale factor S are sent to the decoder at the macroblock layer level. They can thus be changed frequently by the encoder so as to control the bit rate. There are 2 different available ranges for S that the encoder can choose (indicated by a bit in the bitstream). One is a linear range from 2 to 62. The other is a nonlinear range from 1 to 112.</span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;"><b>The decoder calculates an inverse quantized DCT coefficient F' as follows:</b></span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">For AC coefficients of intra coded blocks, F' = (2 x QF x W x S)/32</span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">For DC coefficients of intra coded blocks, F' = k x QF &nbsp;</span></font></p>
<p><font size="3" face="Arial"><span class="DefaultParagraphFont" style="font-size: 10pt;">For all coefficients of non intra coded blocks, F' = { [(2 x QF) + sign(QF)] x Q x S } / 32</span></font></p>
<H2 class="Heading2">Compression Tools Topics:</H2>
<p><font size="4" face="Arial"><span class="DefaultParagraphFont" style="font-size: 12pt;">MPEG 2 Quantization</span></font></p>
<p><a href="mpredic.HTM"><font size="4" face="Arial"><span class="DefaultParagraphFont" style="font-size: 12pt;">MPEG 2 Prediction</span></font></a></p>
<p><a href="DCxfrm.HTM"><font size="4" face="Arial"><span class="DefaultParagraphFont" style="font-size: 12pt;">Discrete Cosine Transform</span></font></a></p>
<p><a href="huffRL.HTM"><font size="4" face="Arial"><span class="DefaultParagraphFont" style="font-size: 12pt;">Huffman/Run-Level Coding</span></font></a></p>
<p><a href="zigzag.HTM"><font size="4" face="Arial"><span class="DefaultParagraphFont" style="font-size: 12pt;">Zig-Zag Scanning Patterns</span></font></a></p>
<p>&nbsp;</p>
<p><a href="mpeg2vc.HTM">Up to MPEG 2 Video Compression Topics</a></p></body>
</html>
